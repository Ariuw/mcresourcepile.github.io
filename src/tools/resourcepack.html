{{> header}}
<div class="container">
    <div class="content-header">
        {{> alert}}
        <div class="content-title">Resource Packs</div>
        <div class="content-subtitle">
            A collection of various resource packs from the PvP community.
        </div>
    </div>
    <form name="search_form" class="record-search-container">
        <input type="search" id="search" name="s" value="" class="form-control record-search-box" placeholder="Search resource packs">
    </form>
    <div class="game-mode-navigation row">
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Texture Size</div>
            <div class="row">
                <div class="col-xs-6">
                    <a class="game-mode-button size_8x" href="?s=8x"></a>
                    <a class="game-mode-button size_32x" href="?s=32x"></a>
                    <a class="game-mode-button size_128x" href="?s=128x"></a>
                </div>
                <div class="col-xs-6">
                    <a class="game-mode-button size_16x" href="?s=16x"></a>
                    <a class="game-mode-button size_64x" href="?s=64x"></a>
                    <a class="game-mode-button size_256x" href="?s=256x"></a>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Minecraft Version</div>
            <div class="row">
                <div class="col-xs-6">
                    <a class="game-mode-button version-1-11" href="?s=1.11"></a>
                    <a class="game-mode-button version-1-9" href="?s=1.9"></a>
                    <a class="game-mode-button version-1-7" href="?s=1.7"></a>
                </div>
                <div class="col-xs-6">
                    <a class="game-mode-button version-1-10" href="?s=1.10"></a>
                    <a class="game-mode-button version-1-8" href="?s=1.8"></a>
                </div>
            </div>
        </div>
    </div>
    <div class="total_resource_packs center" style="padding-top: 10px; padding-bottom: 10px;"></div>
    <div id="resource-packs-output">
        {{#with data}}
        <table class="table" id="table">
            <tbody>
                {{#resource-packs}}
                <tr id="{{id}}" class="resource-pack">
                    <td>
                        <div class="row">
                            <div class="col-md-4">
                                <img src="{{#if icon}}{{icon}}{{else}}/assets/img/logo.png{{/if}}" class="rp-icon">
                                <div class="rp-info">
                                    {{#if name}}
                                        <p class="rp-name">{{name}}</p>
                                        {{else}}
                                        <p class="rp-name">Untitled Pack</p>
                                    {{/if}}
                                    <div>
                                        <span class="author-tag">by</span>
                                        {{#if authors}}
                                            {{#authors}}
                                            <li class="game-tag author-tag">{{#if player_name}}<a class="map-author-name" href="?s={{player_name}}">{{player_name}}</a>{{else}}<span class="map-author-name">Ghost</span>{{/if}}</li>
                                            {{/authors}}
                                            {{else}}<span class="map-author-name author-tag">Ghost</span>
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8 row center">
                                <div class="col-xs-6 col-md-4 rp-details">
                                    {{#if sizes}}
                                        {{#sizes}}
                                            {{#if 8x}}<li class="size-tag"><a href="?s=8x">8x</a><span class="tag_hidden">8x8</span></li>{{/if}}
                                            {{#if 16x}}<li class="size-tag"><a href="?s=16x">16x</a><span class="tag_hidden">16x16</span></li>{{/if}}
                                            {{#if 32x}}<li class="size-tag"><a href="?s=32x">32x</a><span class="tag_hidden">32x32</span></li>{{/if}}
                                            {{#if 64x}}<li class="size-tag"><a href="?s=64x">64x</a><span class="tag_hidden">64x64</span></li>{{/if}}
                                            {{#if 128x}}<li class="size-tag"><a href="?s=128x">128x</a><span class="tag_hidden">128x128</span></li>{{/if}}
                                            {{#if 256x}}<li class="size-tag"><a href="?s=256x">256x</a><span class="tag_hidden">256x256</span></li>{{/if}}
                                        {{/sizes}}
                                        {{else}}
                                        <li class="size-tag"><span class="size-link size-tag">Unknown Size</span></li>
                                    {{/if}}
                                </div>
                                <div class="col-xs-6 col-md-4 rp-details">
                                    {{#if mcversions}}
                                        {{#mcversions}}
                                            {{#if 1-7}}<li class="mcversion-tag"><a href="?s=1.7">1.7</a></li>{{/if}}
                                            {{#if 1-8}}<li class="mcversion-tag"><a href="?s=1.8">1.8</a></li>{{/if}}
                                            {{#if 1-9}}<li class="mcversion-tag"><a href="?s=1.9">1.9</a></li>{{/if}}
                                            {{#if 1-10}}<li class="mcversion-tag"><a href="?s=1.10">1.10</a></li>{{/if}}
                                            {{#if 1-11}}<li class="mcversion-tag"><a href="?s=1.11">1.11</a></li>{{/if}}
                                        {{/mcversions}}
                                        {{else}}
                                        <li class="size-tag"><span class="size-link size-tag">Unknown Version</span></li>
                                    {{/if}}
                                </div>
                                <div class="col-xs-12 col-md-4 row rp-details">
                                    <div class="col-xs-4">
                                        {{#if download}}
                                        <a class="fa fa-download icon-links" href="{{download}}" target="_blank"></a>
                                        {{else}}
                                            {{#if discussion}}
                                            <a href="{{discussion}}" target="_blank">
                                                <span class="fa fa-comments-o icon-links icon-links-alt"></span>
                                                <span class="fa fa-download icon-links"></span>
                                            </a>
                                            {{else}}
                                            <span class="fa fa-download icon-links"></span>
                                            {{/if}}
                                        {{/if}}
                                    </div>
                                    <div class="col-xs-4">
                                        {{#if images}}
                                        <a class="fa fa-picture-o icon-links" href="{{images}}" target="_blank"></a>
                                        {{else}}
                                        <span class="fa fa-picture-o icon-links"></span>
                                        {{/if}}
                                    </div>
                                    <div class="col-xs-4">
                                        {{#if discussion}}
                                        <a class="fa fa-comments icon-links" href="{{discussion}}" target="_blank"></a>
                                        {{else}}
                                        <span class="fa fa-comments icon-links"></span>
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                {{/resource-packs}}
            </tbody>
        </table>
        {{/with}}
    </div>
</div>
<script type="text/javascript">
    $(document).on('ready', function(){
        makeSearchable()
    })
    $('.record-search-container').on('click', function(){
        makeSearchable()
    })
    $(document).on('keydown', function() {
        makeSearchable()
    });
    function makeSearchable(){
        $('#resource-packs-output .table').searchable({
            striped: true,
            oddRow: { 'background-color': '#fff' },
            evenRow: { 'background-color': '#f0f0f0' },
            searchType: 'default',
            searchField: '#search'
        })

        var total_resource_packs = $('.resource-pack').length
        var total_display = $('.resource-pack:visible').length
        var current_search = $('#search').val()

        if (total_resource_packs == "0") {
            $(".total_resource_packs").html("No resource packs successfully loaded<br>Please check the console for any errors and contact a page manager");
        } else if (total_display == "0") {
            $(".total_resource_packs").html("Your query of <code>" + current_search + "</code> references no resource packs, please try searching something else");
        } else {
            $(".total_resource_packs").html("Currently displaying " + total_display + " of " + total_resource_packs + " resource packs");
        }
    }
</script>
<script type="text/javascript">
    var data=location.search;
    if(data) {
        data=location.search.substring(1);
        data=data.split('&');
        var pairs={};
        for(var i=0; i<data.length; i++){
            var tmp=data[i].split('=');
            pairs[tmp[0]]=tmp[1];
        }
        var f = document.search_form;
        for (var i in pairs) {
            if(f.elements[i]) {f.elements[i].value = pairs[i];}
        }
    }
</script>
{{> footer}}
</body>
</html>
