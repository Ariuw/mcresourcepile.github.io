{{> header}}
<div class="container">
    <div class="content-header">
        {{> alert}}
        <div class="content-title">Resource Packs</div>
        <div class="content-subtitle">
            A collection of various resource packs from the PvP community.
        </div>
    </div>
    <form name="search_form" class="record-search-container">
        <input type="search" id="search" name="s" value="" class="form-control record-search-box" placeholder="Search resource packs">
    </form>
    <div class="game-mode-navigation row">
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Texture Size</div>
            <a class="game-mode-button size_8x" href="?s=8x"></a>
            <a class="game-mode-button size_16x" href="?s=16x"></a>
            <a class="game-mode-button size_32x" href="?s=32x"></a>
            <a class="game-mode-button size_64x" href="?s=64x"></a>
            <a class="game-mode-button size_128x" href="?s=128x"></a>
            <a class="game-mode-button size_256x" href="?s=256x"></a>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="game-mode-section-header">Minecraft Version</div>
            <a class="game-mode-button version-1-11" href="?s=1.11"></a>
            <a class="game-mode-button version-1-10" href="?s=1.10"></a>
            <a class="game-mode-button version-1-9" href="?s=1.9"></a>
            <a class="game-mode-button version-1-8" href="?s=1.8"></a>
            <a class="game-mode-button version-1-7" href="?s=1.7"></a>
        </div>
    </div>
    <div class="total_resource_packs center" style="padding-top: 10px; padding-bottom: 10px;"></div>
    <div id="resource-packs-output">
        {{#with data}}
        <table class="table" id="table">
            <thead>
                <tr>
                    <th width="5%"></th>
                    <th width="30%">Name</th>
                    <th width="25%">Authors</th>
                    <th width="15%">Size</th>
                    <th width="15%"><abbr title="Minecraft">MC</abbr> Version</th>
                    <th width="10%"></th>
                </tr>
            </thead>
            <tbody>
                {{#resource-packs}}
                <tr id="{{id}}" class="resource-pack">
                    <td>
                        {{#if icon}}
                            <img src="{{icon}}" height="25%">
                        {{/if}}
                    </td>
                    <td>
                        {{#if name}}
                        <p>{{name}}</p>
                        {{else}}
                        <p>Unknown name</p>
                        {{/if}}
                    </td>
                    <td>
                        {{#if authors}}
                        {{#authors}}
                        <li class="game-tag author-tag">{{#if player_name}}<a class="map-author-name" href="?s={{player_name}}">{{player_name}}</a>{{else}}<span class="map-author-name">Ghost</span>{{/if}}</li>
                        {{/authors}}
                        {{else}}<span class="map-author-name">Ghost</span>
                        {{/if}}
                    </td>
                    <td>
                        {{#if sizes}}
                            {{#sizes}}
                                {{#if 8x}}<li class="size-tag"><a href="?s=8x">8x</a><span class="tag_hidden">8x8</span></li>{{/if}}
                                {{#if 16x}}<li class="size-tag"><a href="?s=16x">16x</a><span class="tag_hidden">16x16</span></li>{{/if}}
                                {{#if 32x}}<li class="size-tag"><a href="?s=32x">32x</a><span class="tag_hidden">32x32</span></li>{{/if}}
                                {{#if 64x}}<li class="size-tag"><a href="?s=64x">64x</a><span class="tag_hidden">64x64</span></li>{{/if}}
                                {{#if 128x}}<li class="size-tag"><a href="?s=128x">128x</a><span class="tag_hidden">128x128</span></li>{{/if}}
                                {{#if 256x}}<li class="size-tag"><a href="?s=256x">256x</a><span class="tag_hidden">256x256</span></li>{{/if}}
                            {{/sizes}}
                            {{else}}
                            <li class="size-tag"><span class="size-link size-tag">Unknown Size</span></li>
                        {{/if}}
                    </td>
                    <td>
                        {{#if mcversions}}
                            {{#mcversions}}
                                {{#if 1-7}}<li class="mcversion-tag"><a href="?s=1.7">1.7</a></li>{{/if}}
                                {{#if 1-8}}<li class="mcversion-tag"><a href="?s=1.8">1.8</a></li>{{/if}}
                                {{#if 1-9}}<li class="mcversion-tag"><a href="?s=1.9">1.9</a></li>{{/if}}
                                {{#if 1-10}}<li class="mcversion-tag"><a href="?s=1.10">1.10</a></li>{{/if}}
                                {{#if 1-11}}<li class="mcversion-tag"><a href="?s=1.11">1.11</a></li>{{/if}}
                            {{/mcversions}}
                            {{else}}
                            <li class="size-tag"><span class="size-link size-tag">Unknown Version</span></li>
                        {{/if}}
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-md-4">
                                {{#if images}}
                                <a href="{{images}}" target="_blank">
                                    <i class="fa fa-picture-o" data-toggle="tooltip" data-placement="top" title="" data-original-title="Images"></i>
                                </a>
                                {{else}}
                                <i class="fa fa-picture-o" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Images"></i>
                                {{/if}}
                            </div>
                            <div class="col-md-4">
                                {{#if download}}
                                <a href="{{download}}" target="_blank">
                                    <i class="fa fa-download icon-links" data-toggle="tooltip" data-placement="top" title="" data-original-title="Download"></i>
                                </a>
                                {{else}}
                                    {{#if discussion}}
                                    <a href="{{discussion}}" target="_blank">
                                        <i class="fa fa-download icon-links" data-toggle="tooltip" data-placement="top" title="" data-original-title="Download in Discussion Thread"></i>
                                    </a>
                                    {{else}}
                                    <i class="fa fa-download" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Download"></i>
                                    {{/if}}
                                {{/if}}
                            </div>
                            <div class="col-md-4">
                                {{#if discussion}}
                                <a href="{{discussion}}" target="_blank">
                                    <i class="fa fa-comments" href="{{discussion}}" data-toggle="tooltip" data-placement="top" title="" data-original-title="Discussion Thread"></i>
                                </a>
                                {{else}}
                                <i class="fa fa-comments" data-toggle="tooltip" data-placement="top" title="" data-original-title="No Discussion Thread"></i>
                                {{/if}}
                            </div>
                    </td>
                </tr>
                {{/resource-packs}}
            </tbody>
        </table>
        {{/with}}
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })

    $(document).on('ready', function(){
        makeSearchable()
    })
    $('.record-search-container').on('click', function(){
        makeSearchable()
    })
    $(document).on('keydown', function() {
        makeSearchable()
    });
    function makeSearchable(){
        $('#resource-packs-output .table').searchable({
            striped: true,
            oddRow: { 'background-color': '#fff' },
            evenRow: { 'background-color': '#f0f0f0' },
            searchType: 'default',
            searchField: '#search'
        })

        var total_resource_packs = $('.resource-pack').length
        var total_display = $('.resource-pack:visible').length
        var current_search = $('#search').val()

        if (total_resource_packs == "0") {
            $(".total_resource_packs").html("No resource packs successfully loaded<br>Please check the console for any errors and contact a page manager");
        } else if (total_display == "0") {
            $(".total_resource_packs").html("Your query of <code>" + current_search + "</code> references no resource packs, please try searching something else");
        } else {
            $(".total_resource_packs").html("Currently displaying " + total_display + " of " + total_resource_packs + " resource packs");
        }
    }
</script>
<script type="text/javascript">
    var data=location.search;
    if(data) {
        data=location.search.substring(1);
        data=data.split('&');
        var pairs={};
        for(var i=0; i<data.length; i++){
            var tmp=data[i].split('=');
            pairs[tmp[0]]=tmp[1];
        }
        var f = document.search_form;
        for (var i in pairs) {
            if(f.elements[i]) {f.elements[i].value = pairs[i];}
        }
    }
</script>
{{> footer}}
</body>
</html>
